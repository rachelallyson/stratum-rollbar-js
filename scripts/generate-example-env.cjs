"use strict";

const path = require("path");
const fs = require("fs");

// Load .env from package root (where package.json and .env live)
require("dotenv").config({ path: path.join(__dirname, "..", ".env") });

const ROLLBAR_CLIENT_TOKEN = process.env.ROLLBAR_CLIENT_TOKEN || "";
const NEXT_PUBLIC_ROLLBAR_CLIENT_TOKEN =
  process.env.NEXT_PUBLIC_ROLLBAR_CLIENT_TOKEN || process.env.ROLLBAR_CLIENT_TOKEN || "";
const NODE_ENV = process.env.NODE_ENV || "development";

const outPath = path.join(__dirname, "..", "src", "example", "env.generated.ts");
const content = `// Generated by scripts/generate-example-env.cjs - do not edit. Values from .env

export const ROLLBAR_CLIENT_TOKEN = ${JSON.stringify(ROLLBAR_CLIENT_TOKEN)};
export const NEXT_PUBLIC_ROLLBAR_CLIENT_TOKEN = ${JSON.stringify(NEXT_PUBLIC_ROLLBAR_CLIENT_TOKEN)};
export const NODE_ENV = ${JSON.stringify(NODE_ENV)};
`;

fs.writeFileSync(outPath, content, "utf8");
console.log("Wrote", outPath);
